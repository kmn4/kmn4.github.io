<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Posts on kamasaki.net</title><link>https://blog.kamasaki.net/post/</link><description>Recent content in Posts on kamasaki.net</description><generator>Hugo -- gohugo.io</generator><language>ja-jp</language><lastBuildDate>Tue, 26 Dec 2023 20:57:50 +0900</lastBuildDate><atom:link href="https://blog.kamasaki.net/post/index.xml" rel="self" type="application/rss+xml"/><item><title>Cloudflare へのドメイン移管後に GitHub Pages が壊れた</title><link>https://blog.kamasaki.net/post/fix-github-pages-after-migration-to-cloudflare-registrar/</link><pubDate>Tue, 26 Dec 2023 20:57:50 +0900</pubDate><guid>https://blog.kamasaki.net/post/fix-github-pages-after-migration-to-cloudflare-registrar/</guid><description>&lt;p>Google Domains が Squarespace に売却されたので、kamasaki.net を Cloudflare に移管した。&lt;br>
その際 MX レコードには特に問題がなかったが、GitHub Pages で構築したこのブログにアクセスできなくなっていた。&lt;/p>
&lt;h1 id="解決法">解決法&lt;/h1>
&lt;p>kmn4.github.io に向けていた CNAME レコードの proxy status を DNS only にすることで、無事 HTTPS アクセスができるようになった。&lt;/p>
&lt;h1 id="原因と思しきもの">原因と思しきもの&lt;/h1>
&lt;p>解決まで紆余曲折あったため十分に検証できていないが、恐らく&lt;a class="link" href="https://github.com/orgs/community/discussions/23632#discussioncomment-3241245" target="_blank" rel="noopener"
>この問題&lt;/a>が関係している。&lt;br>
Cloudflare の DNS レコード設定には &amp;ldquo;Proxy status&amp;rdquo; という項目があって、これが &amp;ldquo;Proxied&amp;rdquo; だと、dig ったときに Cloudflare の IP アドレスが返ってくる&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>。&lt;br>
これにより GitHub Pages への HTTP(S) トラフィックは必ず Cloudflare を通ることとなり、Cloudflare 側でキャシュや DDoS 対策ができるらしいが、それと同時に GitHub 側が HTTPS 用のサーバ証明書を更新できなくなるようだ&lt;sup id="fnref:3">&lt;a href="#fn:3" class="footnote-ref" role="doc-noteref">3&lt;/a>&lt;/sup>&lt;sup id="fnref:4">&lt;a href="#fn:4" class="footnote-ref" role="doc-noteref">4&lt;/a>&lt;/sup>。&lt;/p>
&lt;section class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1" role="doc-endnote">
&lt;p>&lt;a class="link" href="https://developers.cloudflare.com/dns/manage-dns-records/reference/proxied-dns-records/" target="_blank" rel="noopener"
>https://developers.cloudflare.com/dns/manage-dns-records/reference/proxied-dns-records/&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2" role="doc-endnote">
&lt;p>Cloudflare の IP アドレスレンジはこちら: &lt;a class="link" href="https://www.cloudflare.com/ips/" target="_blank" rel="noopener"
>https://www.cloudflare.com/ips/&lt;/a>&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:3" role="doc-endnote">
&lt;p>ACME プロトコルによるドメイン検証ができなくなるということだろうが、詳しくないので説明できない。&amp;#160;&lt;a href="#fnref:3" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:4" role="doc-endnote">
&lt;p>この理屈なら DNS レコード修正前でも HTTP ではアクセスできたはずだが、修正前に試してないためなんとも言えない。&amp;#160;&lt;a href="#fnref:4" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/section></description></item><item><title>Test</title><link>https://blog.kamasaki.net/post/test/</link><pubDate>Sat, 26 Jun 2021 16:08:07 +0900</pubDate><guid>https://blog.kamasaki.net/post/test/</guid><description>&lt;p>てすと&lt;/p>
&lt;p>ああああ&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>key&lt;/th>
&lt;th>value&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>k&lt;/td>
&lt;td>v !&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-scala" data-lang="scala">&lt;span style="color:#66d9ef">sealed&lt;/span> &lt;span style="color:#66d9ef">trait&lt;/span> &lt;span style="color:#a6e22e">Exp&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#66d9ef">A&lt;/span>&lt;span style="color:#f92672">]&lt;/span>
&lt;span style="color:#a6e22e">case&lt;/span> &lt;span style="color:#66d9ef">object&lt;/span> &lt;span style="color:#a6e22e">True&lt;/span> &lt;span style="color:#66d9ef">extends&lt;/span> &lt;span style="color:#a6e22e">Exp&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#66d9ef">Boolean&lt;/span>&lt;span style="color:#f92672">]&lt;/span>
&lt;span style="color:#66d9ef">case&lt;/span> &lt;span style="color:#66d9ef">object&lt;/span> &lt;span style="color:#a6e22e">Flase&lt;/span> &lt;span style="color:#66d9ef">extends&lt;/span> &lt;span style="color:#a6e22e">Exp&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#66d9ef">Boolean&lt;/span>&lt;span style="color:#f92672">]&lt;/span>
&lt;span style="color:#66d9ef">case&lt;/span> &lt;span style="color:#66d9ef">class&lt;/span> &lt;span style="color:#a6e22e">Eq&lt;/span>&lt;span style="color:#f92672">(&lt;/span>e1&lt;span style="color:#66d9ef">:&lt;/span> &lt;span style="color:#66d9ef">Exp&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#66d9ef">Int&lt;/span>&lt;span style="color:#f92672">],&lt;/span> e2&lt;span style="color:#66d9ef">:&lt;/span> &lt;span style="color:#66d9ef">Exp&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#66d9ef">Int&lt;/span>&lt;span style="color:#f92672">])&lt;/span> &lt;span style="color:#66d9ef">extends&lt;/span> &lt;span style="color:#a6e22e">Exp&lt;/span>&lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#66d9ef">Boolean&lt;/span>&lt;span style="color:#f92672">]&lt;/span>
&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>